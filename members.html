<!DOCTYPE html>
<html>
<!------------------------    					Header							----------------------------------->
 <head>
 <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
		 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
		<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.min.js" type="text/javascript"></script>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
	      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
		<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.min.js" type="text/javascript"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Church Registration</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cookie">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/user.css">
    <link rel="stylesheet" href="assets/css/Pretty-Registration-Form.css">
    <link rel="stylesheet" href="assets/css/Pretty-Footer.css">
	 <link rel="stylesheet" href="assets/css/Hero-Technology.css">
    <link rel="stylesheet" href="assets/css/Google-Style-Login.css">
	<script src="js/ajax.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
  
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>

</head>
<!------------------------    					Header							----------------------------------->
  <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header"><a class="navbar-brand navbar-link" href="index.html"><i class="glyphicon glyphicon-phone"></i>Church member tracker</a>
                <button class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
            </div>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav navbar-right">
                    <li role="presentation"><a href="registration.html">REGISTER MEMBER</a></li>
                    <li role="presentation"><a href="members.html">VIEW MEMBERS</a></li>
                    <li role="presentation"><a href="#">LOGS </a></li>
                </ul>
            </div>
        </div>
    </nav>

<!------------------------    					Header							----------------------------------->
<body>
	<div class="container" style="margin-top:20px;">	

		<div class="table table-hover" >

			<table class="table" id="myTable">
			
				<thead>
					<tr>
						<!--th>IDno </th-->
						<th style="float:left;">Church Attendee Name </th>
						<th>Last Name
						</th>
						<th>Referrer </th>
						<th>Actions</th>
					
						
					</tr>
				</thead>
			  <tbody style="color:black">
					
		
				</tbody>
			</table>
		</div>
	</div>
	
	</div>
	<!-- form -->             
	<center>
	<div id="myForm" class="login-card" style="position:relative;  display:none; width:500px; margin-bottom:200px; "><img src="assets/img/JEDC.jpg" class="profile-img-card">
      <p class="profile-name-card"> </p>
        <form id="info" id="theForm" class="form-signin" method="POST" action="http://192.168.8.101:8080/func/update_member.php">
		
	<div class="form-group">
		<label for="inputName" class="control-label">Fname</label>
		<input type="text" class="form-control" id="fname" name="fname" placeholder="First Name" data-error="Bruh, First Name is required!" required>
		<div class="help-block with-errors"></div>
	</div>
		
	<div class="form-group">
		<label for="inputName" class="control-label">Mname</label>
		<input type="text" class="form-control" id="mname" name="mname" placeholder="Middle Name" data-error="Bruh, Middle Name is required!" required>
		<div class="help-block with-errors"></div>
	</div>
	
	<div class="form-group">
		<label for="inputName" class="control-label">Lname</label>
		<input type="text" class="form-control" id="lname" name="lname" placeholder="Last Name" data-error="Bruh, Last Name is required!" required>
		<div class="help-block with-errors"></div>
	</div>
	
	<div class="form-group">
		<label for="inputName" class="control-label">Address</label>
		<input type="text" class="form-control" id="Address" name="Address" placeholder="Address" data-error="Bruh, This is required!" required> 
		<div class="help-block with-errors"></div>
	</div>
	
	<div class="form-group">
		<label for="inputName" class="control-label">ContactNo</label>
		<input type="text" class="form-control" id="ContactNo" name="ContactNo" placeholder="Contact Number" data-error="Bruh, This is required!" required> 
		<div class="help-block with-errors"></div>
	</div>
	
	<div class="form-group">
		<label for="inputName" class="control-label">EmailAddress</label>
		<input type="text" class="form-control" id="Email" name="Email" placeholder="Email Address" data-error="Bruh, This is required!" required> 
		<div class="help-block with-errors"></div>
	</div>
	
	<div class="form-group">
		<label for="inputName" class="control-label">DateJoined</label>
		<input type="text" class="form-control" id="Date" name="Date" placeholder="Date Joined" data-error="Bruh, This is required!" required> 
		<div class="help-block with-errors"></div>
	</div>
	
	<div class="form-group">
		<label for="inputName" class="control-label">Gender</label>
		<input type="text" class="form-control" id="Gender" name="Gender" placeholder="Gender" data-error="Bruh, This is required!" required> 
		<div class="help-block with-errors"></div>
	</div>
	
	<div class="form-group">
		<label for="inputName" class="control-label">Referrer</label>
		<input type="text" class="form-control" id="Referrer" name="Referrer" placeholder="Referrer" data-error="Bruh, This is required!" required> 
		<div class="help-block with-errors"></div>
	</div>

	<div class="form-group">
		<label for="inputName" class="control-label">Occupation</label>
		<input type="text" class="form-control" id="Occupation" name="Occupation" placeholder="Occupation" data-error="Bruh, This is required!" required> 
		<div class="help-block with-errors"></div>
	</div>
	
	<input type="hidden" name="id" id="id">
		
			<button id="confirmEdit"  type="submit" name="submit" id="submit" class="btn btn-primary btn-block btn-lg btn-signin"> Update
			</button>
           
        </form>
		</div></center>
	<!-- form -->

				<script>
				
	$(document).ready(function(){
			//GET DATA
			
              //  var id = data.Idno;
			 var table = $('#myTable').DataTable({
				 
                "ajax":{
                    "url":"http://192.168.8.101:8080/func/show_members.php",
                    "dataSrc":"",
                },
                "columns":[
                  
				  {"data":"Fname"},
					{"data":"Lname"},
					{"data": "Referrer"},
                    {"defaultContent": "<input type='button' id='view' value='edit' class= 'btn btn-primary'>  <input type='button' id='delete' value='delete' class= 'btn btn-danger' >"}
                ],
            });
			//DELETE
			 $(document).on( 'click', '#delete', function () { 
                var data = table.row( $(this).parents('tr') ).data();
                var id = data.Idno;
				
                $("tbody").get(0).innerHTML="";
                $.ajax({
					
                     url:"http://192.168.8.101:8080/func/delete_member.php",
                     method:"GET",
                     data:{id:id},
                     success:function(data){   
                        window.location.href = 'members.php';         
                    }
                });$("tbody").append(table); 
				});
				
			   $(document).on('click', '#view' ,function(){
				  // $('html,body').animate({scrollTop: $("#myForm").offset().top},'slow');
                    var data = table.row( $(this).parents('tr') ).data();
                    var id = data.Idno;
					console.log(id);
					$('#myForm').css('display','inline-block');
					
					$(document).on('click', '#confirmEdit' ,function(){
						$('#myForm').css('display','none');
					 
					});
				
					$.ajax ({
						url:
                        //url:"http://192.168.8.101:8080/func/show_specific_member.php",
                        method:"GET",
                        dataType: "json",
                        data:{id:id},
                        success:function(data){
							
							//console.log(data);
							//console.log(data[0].Fname);
							$('#id').val(data[0].Idno);
							$('#fname').val(data[0].Fname);
							$('#mname').val(data[0].Mname);
							$('#lname').val(data[0].Lname);
							$('#Address').val(data[0].Address);
							$('#ContactNo').val(data[0].ContactNo);
							$('#Email').val(data[0].EmailAddress);
							$('#Date').val(data[0].DateJoined);
							$('#Gender').val(data[0].Gender);
							$('#Referrer').val(data[0].Referrer);
							$('#Occupation').val(data[0].Occupation);
							
							
							
                        }
						
                    });
                });
	});
		
    </script>
	<script>function sure_delete(){return confirm("Are you sure you want to delete?");}</script>
  <!------------------------    					Footer							----------------------------------->
	
  <footer class="site-footer" style ="bottom:0; position:absolute; position:fixed; z-index: 10;">
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <h5>Mobile App © 2018</h5></div>
                <div class="col-sm-6 social-icons"><a href="https://www.facebook.com/groups/213580032844677/"><i class="fa fa-facebook"></i></a><a href="#"><i class="fa fa-twitter"></i></a><a href="#"><i class="fa fa-instagram"></i></a></div>
            </div>
        </div>
</footer>
  <!------------------------    					Footer							-----------------------------------> 
</body>
</html>